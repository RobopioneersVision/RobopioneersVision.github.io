---
title: 海康相机开发日志
toc: true
date: 2022-01-08 19:28:00
---

## 问题

测试发现相机帧率运行帧率锁在70帧



## 排查历程

### 1 参数设置异常

怀疑可能是曝光时间参数过大限制了最大帧率，调整小参数后无效，调大正常帧率下降。

### 2 相机驱动写的有问题

打开**客户端**排查仍然存在锁帧的问题

依次检查各个属性，发现**使能采集控制**限制了最大帧率，该选项开启后通过设置下一项采集帧率使得最大采集帧率限制在这个范围。取消后最大帧率可达到160帧但是距离最大采集帧率210帧仍存在差距。

![image-20220108200258678](https://gitee.com/y_kvm/img/raw/master/picture/202201212157256.png)

### 3. 优化帧率

排除限制后，检查帧率是否被回调函数限制，排除图像存储的内存操作后帧率未发生明显的变化仍然保持160帧，排除回调函数的问题。

### 4.图像格式

图像格式不适用于高速采集尝试RGB、YUYV等均限制在80FPS，只有BayerRG8能达到160+的帧率

## 小结

目前帧率保持在160+，尚无进一步提升的思路	——2022.1.8

## 未来计划

- 尝试和实现调用Gamma 矫正，客户端效果不错
- 解决帧率上限的问题

## 参考文档

[海康相机  MV-CA016-10UC](https://www.hikrobotics.com/cn/machinevision/productdetail?id=2653&pageNumber=2&pageSize=20)